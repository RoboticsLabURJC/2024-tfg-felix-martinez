---
title: "Semana 9 - Mejora de la Segmentación Geométrica"
categories:
  - Weblog
tags:
  - Python
  - Segmentación
  - Open3D
---

Esta semana me he dedicado a mejorar la **Segmentación Geométrica por Parches Planos**, para ello he utilizado el método de Open3d `detect_planar_patches`. He ido ajustando los parámetros del modelo de segmentación en función de las características de las muestras en exteriores.

He decidido separar la segmentación geomeétrica en dos ramas, la segmentación del suelo y segmentación de otros objetos que presenten geometrías planas. La segmentación del suelo aún no la he mejorado para tener en cuenta las inclinaciones posibles que puede tener.

### Resultado de la SPP

<figure class="align-center" style="max-width: 100%">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/spp1.png" alt="Visor 3D">
</figure>

<figure class="align-center" style="max-width: 100%">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/spp2.png" alt="Visor 3D">
</figure>

<figure class="align-center" style="max-width: 100%">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/spp3.png" alt="Visor 3D">
</figure>

### Configuración actual del Modelo

```python
plane_patches = point_cloud.detect_planar_patches(
    normal_variance_threshold_deg=30.0, # Limite de la variacion permitida entre las normales de los puntos de una region (Grados Cuanto más pequeño, más estricto
    coplanarity_deg=20, # Establece la distribucion de la distancia entre los puntos que forman el plano. Cuanto mas pequeño, mas estricto. (grados)
    outlier_ratio=1.0, # Porcentaje maximo de puntos rechazados en la región para rechazar el plano estimado
    min_plane_edge_length=0.1, # Distancia minima de la arista mas larga del plano (filtrar planos pequeños)
    min_num_points=0, # Cantidad minima de puntos para que se acepte el plano en la region
    search_param=o3d.geometry.KDTreeSearchParamKNN(knn=30) # Define el parametro de vecinos mas cercanos para la realizacion de los otros algoritmos
)
```

